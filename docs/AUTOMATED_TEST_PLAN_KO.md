# Vision Chain 테스트넷 자동화 부하 테스트 모듈 개발 계획

이 문서는 비전체인 테스트넷의 안정성 및 성능을 검증하기 위해 무작위 지갑 생성 및 트래픽 시뮬레이션을 수행하는 모듈(`TrafficGenerator`)의 개발 계획을 설명합니다.

---

## 1. 테스트 시나리오 개요

사용자의 요청에 따라 다음과 같은 순환 트래픽 시나리오를 구성합니다.

1.  **지갑 생성**: 1~5분 사이의 무작위 간격으로 새로운 테스트용 지갑(임시 계정)을 생성합니다.
2.  **초기 자금 공급**: 메인 테스트넷 지갑(Master Faucet)에서 새로 생성된 지갑으로 일정량의 VCN 코인을 전송합니다.
3.  **연쇄 전송 (Chain Reaction)**:
    -   지갑 A -> 지갑 B -> 지갑 C 형태로 코인을 연쇄 전송하여 트랜잭션 수열을 생성합니다.
    -   각 전송 시 0~100% 사이의 무작위 금액을 전송합니다.
4.  **회계 메타데이터 주입**: VisionScan Beta 테스트를 위해 각 트랜잭션에 무작위 회계 코드(A110, S200 등)와 세무 카테고리를 포함합니다.
5.  **크로스체인 호환성 검토**:
    -   모든 트랜잭션은 Vision Chain의 `shared-sequencer`를 통해 처리됩니다.
    -   일부 트랜잭션은 `VisionEqualizer`를 통해 가상의 가로질러 전송(Cross-chain simulation)되는 의도(Intent)를 포함합니다.

---

## 2. 모듈 아키텍처 (`TrafficGenerator`)

모듈은 Node.js 기반의 독립 실행형 봇으로 개발됩니다.

### 주요 구성 요소
1.  **Wallet Manager**:
    -   `ethers.Wallet.createRandom()`을 사용하여 즉석에서 신규 지갑 생성.
    -   생성된 지갑의 Private Key를 메모리 내 큐(Queue)에서 관리.
2.  **Scheduler (Random Timer)**:
    -   `Math.random()`을 사용하여 60,000ms(1분) ~ 300,000ms(5분) 사이의 지연 시간 산출.
    -   비동기 루프를 통해 지속적인 트래픽 발생 유지.
3.  **Transaction Engine**:
    -   Vision Chain RPC (`46.224.221.201:8545`) 연결.
    -   `shared-sequencer` API (`POST /rpc/submit`)를 통한 트랜잭션 제출.
4.  **Metadata Factory**:
    -   거래 유형별 가짜 메타데이터 생성 (예: 'Invoice Settlement', 'Liquidity Swap' 등).
5.  **Logger & Dashboard**:
    -   성공/실패율, 초당 트랜잭션(TPS), 가스 소모량 기록.

---

## 3. 개발 및 테스트 로드맵

### Phase 1: 기본 엔진 개발 (3일)
- [ ] `ethers.js` 기반 지갑 생성 및 기본 전송 스크립트 작성.
- [ ] 무작위 시간 간격 로직 구현.
- [ ] 시퀀서 API 연동 테스트.

### Phase 2: 시나리오 고도화 (2일)
- [ ] 지갑 간 연쇄 전송(Hop-by-hop) 로직 구현.
- [ ] VisionScan용 회계 메타데이터 랜덤 생성기 추가.
- [ ] 크로스체인 이퀄라이저 호출 시뮬레이션 포함.

### Phase 3: 안정성 테스트 및 모니터링 (2일)
- [ ] 24시간 연속 가동 테스트 (Stability Test).
- [ ] 트랜잭션 누락 여부 및 시퀀서 데이터베이스 반영 확인.
- [ ] 결과 레포트 자동 생성 기능 추가.

---

## 4. 기대 효과

- **부하 분산 확인**: 실제 사용자가 없는 환경에서도 지속적인 부하를 주어 시퀀서의 병목 지점을 파악합니다.
- **VisionScan 데이터 축적**: 수만 건의 무작위 회계 데이터를 생성하여 VisionScan의 필터링 및 리포트 성능을 검증합니다.
- **메인넷 준비**: 가스비 모델 및 블록 생성 안정성을 실제 서비스 런칭 전 최종 확인합니다.
